<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ - Ø§Ù„Ø®Ø§Ù„</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: radial-gradient(circle, #1e1e2f 0%, #0c0c14 100%); color: white; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .wheel-container { position: relative; width: 300px; height: 300px; margin-bottom: 30px; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; border: 5px solid #ffd700; transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1); }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #ffd700; z-index: 10; }
        .spin-button { background: #ffd700; color: #000; border: none; padding: 12px 30px; font-size: 18px; font-weight: bold; border-radius: 50px; cursor: pointer; }
        .spin-button:disabled { background: #555; }
    </style>
</head>
<body>
    <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</h1>
    <div class="wheel-container">
        <div class="pointer"></div>
        <canvas id="wheel" width="500" height="500"></canvas>
    </div>
    <button class="spin-button" id="spinBtn" onclick="startSpin()">ØªØ¯ÙˆÙŠØ±! ğŸš€</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const prizes = ["500 Ù„.Ø³", "Ø­Ø¸ Ø£ÙˆÙØ±", "1000 Ù„.Ø³", "ğŸ Ù‡Ø¯ÙŠØ©", "5000 Ù„.Ø³", "Ù„Ù€ÙØ© Ù…Ø¬Ø§Ù†ÙŠØ©"];
        const colors = ["#e74c3c", "#34495e", "#2ecc71", "#f1c40f", "#9b59b6", "#1abc9c"];
        
        function draw() {
            for (let i = 0; i < 6; i++) {
                ctx.beginPath(); ctx.fillStyle = colors[i]; ctx.moveTo(250, 250);
                ctx.arc(250, 250, 250, i * Math.PI/3, (i+1) * Math.PI/3); ctx.fill();
                ctx.save(); ctx.translate(250, 250); ctx.rotate(i * Math.PI/3 + Math.PI/6);
                ctx.textAlign = "right"; ctx.fillStyle = "white"; ctx.font = "bold 25px Arial";
                ctx.fillText(prizes[i], 220, 10); ctx.restore();
            }
        }
        draw();

        let deg = 0;
        function startSpin() {
            document.getElementById('spinBtn').disabled = true;
            deg += Math.floor(Math.random() * 360) + 3600;
            canvas.style.transform = `rotate(${deg}deg)`;

            setTimeout(() => {
                const actualDeg = deg % 360;
                const index = Math.floor((360 - (actualDeg % 360)) / 60) % 6;
                const result = prizes[index];

                tg.showPopup({
                    title: 'Ù…Ø¨Ø±ÙˆÙƒ!',
                    message: `Ø±Ø¨Ø­Øª: ${result}`,
                    buttons: [{type: 'ok'}]
                }, function() {
                    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙˆØ±Ø§Ù‹ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
                    tg.sendData(result); 
                    tg.close();
                });
            }, 5000);
        }
    </script>
</body>
</html>
